// Talentbrew Pixel v1.7.1
"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:!0,configurable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var a=t[i];if(e.call(r,a,i,t))return a;i++}},configurable:!0,writable:!0});var tbns={config:{trackingSystemsAttached:[{name:"talentbrew",omit_keys:[],defaults:{clientid:"amazon-75",category:"conversion",job_id:"staff",value:"10.0",applicant_id:"1",extra_data:{domain:"{{DOMAIN}}",browser:"{{BROWSER}}",mobile:"{{IS_MOBILE}}",params:"{{REQUEST_PARAMS}}",cookies:"{{COOKIES}}"}}}],utmArray:["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],defaults:{clientid:"amazon-75",category:"conversion",job_id:"staff",value:"10.0",applicant_id:"1",extra_data:{domain:"{{DOMAIN}}",browser:"{{BROWSER}}",cookies:"{{COOKIES}}",params:"{{REQUEST_PARAMS}}",mobile:"{{IS_MOBILE}}"}}}};(function(e,t,n,r,i,a,o){e[i]||(e.GlobalSnowplowNamespace=e.GlobalSnowplowNamespace||[],e.GlobalSnowplowNamespace.push(i),e[i]=function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].q=e[i].q||[],a=t.createElement(n),o=t.getElementsByTagName(n)[0],a.async=1,a.src="//d1fc8wv8zag5ca.cloudfront.net/2.6.1/sp.js",o.parentNode.insertBefore(a,o))})(window,document,"script",0,"analytics_talentbrew"),tbns.initializeTalentbrew=function(e){var t=tbns.config;if(!tbns.talentbrew_initialized){t.defaults=tbns.transform(tbns.applyRules(Object.assign({},t.defaults,e)));for(var n=tbns.transform(JSON.parse('{"appId":"{{CUSTOMER}}","cookieDomain":".{{DOMAIN}}"}')),r=0;r<Object.keys(n).length;r++){var i=Object.keys(n)[r],a=n[i];"object"===(void 0===a?"undefined":_typeof(a))&&(n[i]=new(Function.prototype.bind.apply(Function,[null].concat(_toConsumableArray(a.params),[a.body]))))}window.analytics_talentbrew("newTracker","amazon-75-tracker","analytics.talentbrew.io",n),"page-view"===(e||{}).conversion_event&&window.analytics_talentbrew("trackPageView"),tbns.fireTalentbrew(e),tbns.talentbrew_initialized=!0}},tbns.fireTalentbrew=function(e){var t=tbns.config,n=tbns.transform(tbns.applyRules(Object.assign({},t.defaults,t.trackingSystemsAttached.find((function(e){return"talentbrew"===e.name})).defaults||{},e)));t.trackingSystemsAttached.find((function(e){return"talentbrew"===e.name})).omit_keys.forEach((function(e){return delete n[e]})),n=Object.assign({},n,tbns.transform(t.trackingSystemsAttached.find((function(e){return"talentbrew"===e.name})).defaults.extra_data||t.defaults.extra_data)),window.analytics_talentbrew("trackStructEvent",n.category,n.conversion_event,n.job_id,n.applicant_id,n.value)},tbns.registry||(tbns.registry={init:[],fire:[]}),tbns.registry.init.push(tbns.initializeTalentbrew),tbns.registry.fire.push(tbns.fireTalentbrew),tbns.Cookie={set:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i="";if(tbns.isset(n)){var a=new Date;a.setTime(a.getTime()+60*n*1e3),i="; expires="+a.toGMTString()}document.cookie="tb_"+e+"="+t+i+"; path="+r},get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}},delete:function(e){this.set(e,"",-100)},exists:function(e){return tbns.isset(this.get(e))},setUtms:function(){for(var e=tbns.config,t=!1,n=0;n<e.utmArray.length;n++){var r=e.utmArray[n];if(tbns.isset(tbns.Url.getParameterByName(r))){t=!0;break}}if(t){for(var i=void 0,a={},o=0;o<e.utmArray.length;o++){var s=e.utmArray[o];i=tbns.Url.getParameterByName(s),tbns.isset(i)&&(a[s]=i)}this.set("utm",JSON.stringify(a))}},getUtm:function(e){if(this.exists("utm")){var t=JSON.parse(this.get("utm"));return e in t?t[e]:""}}},tbns.Url={getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},externalHost:function(e){return e.hostname!==location.hostname&&0===e.protocol.indexOf("http")}},tbns.Browser={nameAndVersion:function(){var e=navigator.userAgent,t=void 0,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===n[1]&&null!==(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))},isMobile:function(){return"ontouchstart"in document},userAgent:function(){return window.navigator.userAgent}},tbns.escapeRegExp=function(e){return e.replace(/[\-\[\]\/{}()*+?.\\^$|]/g,"\\$&")},tbns.pixel_version="v1.7.1",tbns.transform=function(e){var t=tbns.config,n="",r=e;if("object"===(void 0===e?"undefined":_typeof(e))){var i=JSON.stringify(e);n=JSON.stringify(e);for(var a=[],o=void 0,s=(i.match(/{{\s*[\w.]+\s*}}/g)||[]).map((function(e){return e.match(/[\w.]+/)[0]})),c=0;c<s.length;c++){var f=s[c];if(f.startsWith("COOKIE."))r=tbns.Cookie.get(f.substring(f.indexOf(".")+1));else if(f.startsWith("REQUEST_PARAM."))(r=tbns.Url.getParameterByName(f.substring(f.indexOf(".")+1)))||(r="");else{var l=document.domain.split("."),u=l.length>2?"com"===l[l.length-2]||"co"===l[l.length-2]?l.slice(l.length-3).join("."):l.slice(l.length-2).join("."):document.domain;switch(f.toUpperCase()){case"PAGE_URL":r=window.location.href;break;case"PATH":r=window.location.pathname;break;case"DOMAIN":r=u;break;case"BROWSER":r=tbns.Browser.nameAndVersion();break;case"USERAGENT":r=tbns.Browser.userAgent();break;case"IS_MOBILE":r=tbns.Browser.isMobile();break;case"COOKIES":for(var b=(r=document.cookie).split("; "),p=[],d=0;d<b.length;d++){var g=b[d].split("="),m=_slicedToArray(g,2),y=m[0],v=m[1];(v||"").startsWith('{"')&&(v=v.replace(/"/g,"%2f"));var w=y+"="+v;'""'!==v&&p.push(w),(y.startsWith("sp_")||y.startsWith("_sp_"))&&a.push(w)}r=p.join("; "),o=a.join("; ");break;case"REQUEST_PARAMS":r=window.location.search.slice(1).split("&").join(";");break;case"GUID":r=tbns.guid();break;case"NOW":r=Date.now();break;case"DAY_OF_WEEK":r=(new Date).getDay();break;case"VERSION":r=tbns.pixel_version;break;case"CUSTOMER":r=t.defaults.clientid}}"COOKIES"===f&&(n=i.replace(new RegExp("{{COOKIES}}","g"),o)),i=i.replace(new RegExp("{{"+f+"}}","g"),r)}for(var h=new RegExp("{{2}(.*?[^}{2}]+)}{2}","g"),O=(i.match(h)||[]).map((function(e){return e.replace(h,"$1").trim()})).reverse(),_=0;_<O.length;_++){var x=O[_];if(x.startsWith("FN_CALL")){var A=x.substring(x.indexOf("("));r=new Function("try {var x = "+A+';return x;} catch(err) {console.log("an error occurred in macro function '+x+'");console.log(err); return "";}')(),i=i.replace(new RegExp("{{2}(["+tbns.escapeRegExp(x)+"^}]+)}{2}","g"),r)}}var S=void 0;try{S=JSON.parse(i)}catch(e){S=JSON.parse(n)}return S}return r},tbns.applyRules=function(e){var t=tbns.config;if(e.rulesApplied)return e;var n=t.rules||{},r=Object.assign({},e);if(n.hasOwnProperty("overrides"))for(var i=function(e){var t=Object.keys(n.overrides)[e];if(r.hasOwnProperty(t))for(var i=0;i<n.overrides[t].contains.length;i++){var a=n.overrides[t].contains[i];if(a.string.some((function(e){return r[t].indexOf(e)>=0}))){for(var o=0;o<Object.keys(a.replace||[]).length;o++){var s=Object.keys(a.replace)[o];r[s]=a.replace[s]}for(var c=0;c<Object.keys(a.prefix||[]).length;c++){var f=Object.keys(a.prefix)[c];r[f]=a.prefix[f]+r[f]}for(var l=0;l<Object.keys(a.suffix||[]).length;l++){var u=Object.keys(a.suffix)[l];r[u]=r[u]+a.suffix[u]}}}},a=0;a<Object.keys(n.overrides).length;a++)i(a);if(n.hasOwnProperty("prefix"))for(a=0;a<Object.keys(n.prefix).length;a++){var o=Object.keys(n.prefix)[a];r.hasOwnProperty(o)&&(r[o]=n.prefix[o]+r[o])}if(n.hasOwnProperty("suffix"))for(var s=0;s<Object.keys(n.suffix).length;s++){var c=Object.keys(n.suffix)[s];r.hasOwnProperty(c)&&(r[c]=r[c]+n.suffix[c])}return r.rulesApplied=!0,r};var talentbrew_pixel={init:function(e){return tbns.registry.init.map((function(t){return t(tbns.transform(e))}))},fire:function(e){return tbns.registry.fire.map((function(t){return t(tbns.transform(e))}))},__v:function(){return tbns.pixel_version}};!function(){if(!window.tbns_initialized){var e=tbns.config;e.defaults=Object.assign(tbns.transform(e.defaults)),(e.rules||{}).hasOwnProperty("fireOnUnload")&&window.addEventListener("beforeunload",(function(){window.setTimeout((function(){talentbrew_pixel.fire({conversion_event:tbns.config.rules.fireOnUnload.conversion_event})}),500)})),window.tbns_initialized=!0}}();